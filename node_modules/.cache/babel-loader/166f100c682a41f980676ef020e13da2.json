{"ast":null,"code":"var _jsxFileName = \"/Users/schhabra/Downloads/bookstore-v2-master/src/pages/Admin.js\";\nimport React, { useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { API, graphqlOperation, Storage } from \"aws-amplify\";\nimport { AmplifyAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\nimport { createBook } from '../api/mutations';\nimport config from '../aws-exports';\nconst {\n  aws_user_files_s3_bucket_region: region,\n  aws_user_files_s3_bucket: bucket\n} = config;\n\nconst Admin = () => {\n  const [image, setImage] = useState(null);\n  const [bookDetails, setBookDetails] = useState({\n    title: \"\",\n    description: \"\",\n    image: \"\",\n    author: \"\",\n    price: \"\"\n  });\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!bookDetails.title || !bookDetails.price) return;\n      await API.graphql(graphqlOperation(createBook, {\n        input: bookDetails\n      }));\n      setBookDetails({\n        title: \"\",\n        description: \"\",\n        image: \"\",\n        author: \"\",\n        price: \"\"\n      });\n    } catch (err) {\n      console.log('error creating todo:', err);\n    }\n  };\n\n  const handleImageUpload = async e => {\n    e.preventDefault();\n    const file = e.target.files[0];\n    const extension = file.name.split(\".\")[1];\n    const name = file.name.split(\".\")[0];\n    const key = `images/${uuidv4()}${name}.${extension}`;\n    const url = `https://${bucket}.s3.${region}.amazonaws.com/public/${key}`;\n\n    try {\n      // Upload the file to s3 with private access level. \n      await Storage.put(key, file, {\n        level: 'public',\n        contentType: file.type\n      }); // Retrieve the uploaded file to display\n\n      const image = await Storage.get(key, {\n        level: 'public'\n      });\n      setImage(image);\n      setBookDetails({ ...bookDetails,\n        image: url\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"admin-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AmplifyAuthenticator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }, \"Add New Book\"), /*#__PURE__*/React.createElement(AmplifySignOut, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form-wrapper\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  }, image ? /*#__PURE__*/React.createElement(\"img\", {\n    className: \"image-preview\",\n    src: image,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 38\n    }\n  }) : /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/jpg\",\n    onChange: e => handleImageUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 93\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-fields\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 36\n    }\n  }, \"Title\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"email\",\n    type: \"title\",\n    placeholder: \"Type the title\",\n    onChange: e => setBookDetails({ ...bookDetails,\n      title: e.target.value\n    }),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 36\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 36\n    }\n  }, \"Description\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"description\",\n    type: \"text\",\n    rows: \"8\",\n    placeholder: \"Type the description of the book\",\n    onChange: e => setBookDetails({ ...bookDetails,\n      description: e.target.value\n    }),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 36\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"author-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 36\n    }\n  }, \"Author\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"author\",\n    type: \"text\",\n    placeholder: \"Type the author's name\",\n    onChange: e => setBookDetails({ ...bookDetails,\n      author: e.target.value\n    }),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 36\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"price-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 36\n    }\n  }, \"Price ($)\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"price\",\n    type: \"text\",\n    placeholder: \"What is the Price of the book (USD)\",\n    onChange: e => setBookDetails({ ...bookDetails,\n      price: e.target.value\n    }),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"featured-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 36\n    }\n  }, \"Featured?\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    className: \"featured-checkbox\",\n    checked: bookDetails.featured,\n    onChange: () => setBookDetails({ ...bookDetails,\n      featured: !bookDetails.featured\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 33\n    }\n  }, \"Submit\")))))));\n};\n\nexport default Admin;","map":{"version":3,"sources":["/Users/schhabra/Downloads/bookstore-v2-master/src/pages/Admin.js"],"names":["React","useState","v4","uuidv4","API","graphqlOperation","Storage","AmplifyAuthenticator","AmplifySignOut","createBook","config","aws_user_files_s3_bucket_region","region","aws_user_files_s3_bucket","bucket","Admin","image","setImage","bookDetails","setBookDetails","title","description","author","price","handleSubmit","e","preventDefault","graphql","input","err","console","log","handleImageUpload","file","target","files","extension","name","split","key","url","put","level","contentType","type","get","value","featured"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { v4 as uuidv4 } from 'uuid';\nimport { API, graphqlOperation, Storage } from \"aws-amplify\";\nimport { AmplifyAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\nimport { createBook } from '../api/mutations'\nimport config from '../aws-exports'\n\nconst {\n    aws_user_files_s3_bucket_region: region,\n    aws_user_files_s3_bucket: bucket\n} = config\n\n\nconst Admin = () => {\n    const [image, setImage] = useState(null);\n    const [bookDetails, setBookDetails] = useState({ title: \"\", description: \"\", image: \"\", author: \"\", price: \"\" });\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            if (!bookDetails.title || !bookDetails.price) return\n            await API.graphql(graphqlOperation(createBook, { input: bookDetails }))\n            setBookDetails({ title: \"\", description: \"\", image: \"\", author: \"\", price: \"\" })\n        } catch (err) {\n            console.log('error creating todo:', err)\n        }\n    }\n\n    const handleImageUpload = async (e) => {\n        e.preventDefault();\n        const file = e.target.files[0];\n        const extension = file.name.split(\".\")[1];\n        const name = file.name.split(\".\")[0];\n        const key = `images/${uuidv4()}${name}.${extension}`;\n        const url = `https://${bucket}.s3.${region}.amazonaws.com/public/${key}`\n        try {\n            // Upload the file to s3 with private access level. \n            await Storage.put(key, file, {\n                level: 'public',\n                contentType: file.type\n            });\n            // Retrieve the uploaded file to display\n            const image = await Storage.get(key, { level: 'public' })\n            setImage(image);\n            setBookDetails({ ...bookDetails, image: url });\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    return (\n        <section className=\"admin-wrapper\">\n            <AmplifyAuthenticator>\n                <section>\n                    <header className=\"form-header\">\n                        <h3>Add New Book</h3>\n                        <AmplifySignOut></AmplifySignOut>\n                    </header>\n                    <form className=\"form-wrapper\" onSubmit={handleSubmit}>\n                        <div className=\"form-image\">\n                            {image ? <img className=\"image-preview\" src={image} alt=\"\" /> : <input\n                                type=\"file\"\n                                accept=\"image/jpg\"\n                                onChange={(e) => handleImageUpload(e)} />}\n\n                        </div>\n                        <div className=\"form-fields\">\n                            <div className=\"title-form\">\n                                <p><label htmlFor=\"title\">Title</label></p>\n                                <p><input\n                                    name=\"email\"\n                                    type=\"title\"\n                                    placeholder=\"Type the title\"\n                                    onChange={(e) => setBookDetails({ ...bookDetails, title: e.target.value })}\n                                    required\n                                /></p>\n                            </div>\n                            <div className=\"description-form\">\n                                <p><label htmlFor=\"description\">Description</label></p>\n                                <p><textarea\n                                    name=\"description\"\n                                    type=\"text\"\n                                    rows=\"8\"\n                                    placeholder=\"Type the description of the book\"\n                                    onChange={(e) => setBookDetails({ ...bookDetails, description: e.target.value })}\n                                    required\n                                /></p>\n                            </div>\n                            <div className=\"author-form\">\n                                <p><label htmlFor=\"author\">Author</label></p>\n                                <p><input\n                                    name=\"author\"\n                                    type=\"text\"\n                                    placeholder=\"Type the author's name\"\n                                    onChange={(e) => setBookDetails({ ...bookDetails, author: e.target.value })}\n                                    required\n                                /></p>\n                            </div>\n                            <div className=\"price-form\">\n                                <p><label htmlFor=\"price\">Price ($)</label>\n                                    <input\n                                        name=\"price\"\n                                        type=\"text\"\n                                        placeholder=\"What is the Price of the book (USD)\"\n                                        onChange={(e) => setBookDetails({ ...bookDetails, price: e.target.value })}\n                                        required\n                                    /></p>\n                            </div>\n                            <div className=\"featured-form\">\n                                <p><label>Featured?</label>\n                                    <input type=\"checkbox\"\n                                        className=\"featured-checkbox\"\n                                        checked={bookDetails.featured}\n                                        onChange={() => setBookDetails({ ...bookDetails, featured: !bookDetails.featured })}\n                                    />\n                                </p>\n                            </div>\n                            <div className=\"submit-form\">\n                                <button className=\"btn\" type=\"submit\">Submit</button>\n                            </div>\n                        </div>\n                    </form>\n                </section>\n            </AmplifyAuthenticator>\n        </section>\n    )\n}\n\nexport default Admin\n"]},"metadata":{},"sourceType":"module"}